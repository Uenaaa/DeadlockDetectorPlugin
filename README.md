ğŸš€ DeadLockDetectorPlugin

DeadLockDetectorPlugin æ˜¯ä¸€ä¸ªç”¨äºæ£€æµ‹ IntelliJ IDEA/DevEcoStudio å¹¶å‘ä»£ç ä¸­æ­»é”æƒ…å†µçš„æ™ºèƒ½æ’ä»¶ã€‚è¯¥æ’ä»¶èƒ½å¤Ÿè‡ªåŠ¨åˆ†æç”¨æˆ·ç¼–å†™çš„ Java ä»£ç ç»“æ„ï¼Œè¯†åˆ«çº¿ç¨‹åˆ›å»ºã€åŒæ­¥å—å’Œé”çš„è·å–æ¨¡å¼ï¼Œå¹¶é€šè¿‡èµ„æºåˆ†é…å›¾(RAG)å’Œæ·±åº¦ä¼˜å…ˆæœç´¢(DFS)ç®—æ³•ç²¾å‡†æ£€æµ‹æ½œåœ¨çš„æ­»é”é—®é¢˜ã€‚

## åŠŸèƒ½ç‰¹ç‚¹

- **æ™ºèƒ½æ­»é”æ£€æµ‹**ï¼šé‡‡ç”¨èµ„æºåˆ†é…å›¾(RAG)å’Œæ·±åº¦ä¼˜å…ˆæœç´¢(DFS)ç®—æ³•ï¼Œé«˜æ•ˆæ£€æµ‹ä»£ç ä¸­çš„æ­»é”æ¡ä»¶
- **æ— ç¼ IDE é›†æˆ**ï¼šåœ¨ IntelliJ IDEA/DevEcoStudio ä¸­é€šè¿‡å³é”®èœå•å³å¯è§¦å‘æ­»é”æ£€æµ‹
- **ç²¾ç¡®ä»£ç åˆ†æ**ï¼šåŸºäº Psi API æ·±å…¥è§£æ Java ä»£ç ç»“æ„ï¼Œæ”¯æŒçº¿ç¨‹ã€åŒæ­¥å—ã€Lambda è¡¨è¾¾å¼ç­‰å¤æ‚è¯­æ³•
- **ç›´è§‚å¯è§†åŒ–ç•Œé¢**ï¼šæä¾›æ¸…æ™°çš„æ­»é”æ£€æµ‹ç»“æœå¯è§†åŒ–å±•ç¤ºï¼Œæ–¹ä¾¿ç”¨æˆ·ç†è§£æ­»é”äº§ç”Ÿçš„åŸå› 

## æŠ€æœ¯å®ç°

### æ ¸å¿ƒç®—æ³•
é‡‡ç”¨èµ„æºåˆ†é…å›¾(RAG)æ„å»ºçº¿ç¨‹ä¸é”çš„å…³ç³»ç½‘ç»œï¼Œç»“åˆæ·±åº¦ä¼˜å…ˆæœç´¢(DFS)ç®—æ³•æ£€æµ‹å¾ªç¯ç­‰å¾…æ¡ä»¶ï¼Œå®ç°é«˜æ•ˆå‡†ç¡®çš„æ­»é”è¯†åˆ«ã€‚

### å¼€å‘æ¡†æ¶
åŸºäº IntelliJ IDEA SDK å¼€å‘çš„æ’ä»¶ï¼Œåˆ©ç”¨ IntelliJ Platform çš„å¼ºå¤§èƒ½åŠ›å®ç°ä¸ IDE çš„æ·±åº¦é›†æˆã€‚

### ä»£ç åˆ†æ
ä½¿ç”¨ Psi API è§£æ Java ä»£ç ç»“æ„ï¼Œèƒ½å¤Ÿè¯†åˆ«çº¿ç¨‹åˆ›å»ºã€åŒæ­¥å—ã€é”è·å–é‡Šæ”¾ç­‰å…³é”®æ“ä½œï¼Œæ”¯æŒ Lambda è¡¨è¾¾å¼å’ŒåŒ¿åå†…éƒ¨ç±»ç­‰ç°ä»£ Java ç‰¹æ€§ã€‚

### æ„å»ºç³»ç»Ÿ
åŸºäº Gradle å’Œ IntelliJ Platform Plugin æ„å»ºï¼Œæä¾›è‡ªåŠ¨åŒ–çš„ç¼–è¯‘ã€æµ‹è¯•å’Œæ‰“åŒ…æµç¨‹ã€‚

## æ ¸å¿ƒåŠŸèƒ½å®ç°

### æ­»é”æ£€æµ‹å¼•æ“
å®ç°äº†èµ„æºåˆ†é…å›¾çš„æ„å»ºä¸ç®¡ç†ï¼Œæ”¯æŒçº¿ç¨‹èŠ‚ç‚¹å’Œé”èŠ‚ç‚¹çš„åˆ›å»ºä¸å…³ç³»ç»´æŠ¤ï¼Œé€šè¿‡ DFS ç®—æ³•é«˜æ•ˆæ£€æµ‹èµ„æºåˆ†é…å›¾ä¸­çš„å¾ªç¯ç­‰å¾…æ¡ä»¶ã€‚

### ä»£ç è§£ææ¨¡å—
èƒ½å¤Ÿè‡ªåŠ¨è¯†åˆ« Java ä»£ç ä¸­çš„çº¿ç¨‹åˆ›å»ºï¼ˆThread ç±»ã€Runnable æ¥å£ã€Lambda è¡¨è¾¾å¼ï¼‰ã€åŒæ­¥å—ï¼ˆsynchronizedï¼‰ã€é”æ“ä½œï¼ˆReentrantLock ç­‰ï¼‰ç­‰å…³é”®ç»“æ„ï¼Œæå–æ­»é”æ£€æµ‹æ‰€éœ€çš„çº¿ç¨‹å’Œé”ä¿¡æ¯ã€‚

### IDE é›†æˆåŠŸèƒ½
æä¾›äº†ç›´è§‚çš„å³é”®èœå•è§¦å‘æ–¹å¼ï¼Œåœ¨ä»£ç ç¼–è¾‘å™¨ä¸­å³å¯å¿«é€Ÿå¯åŠ¨æ­»é”æ£€æµ‹ï¼Œå¹¶å°†æ£€æµ‹ç»“æœä»¥å¯è§†åŒ–æ–¹å¼å‘ˆç°ç»™ç”¨æˆ·ã€‚

### å¯è§†åŒ–å±•ç¤º
é‡‡ç”¨ç°ä»£ç®€æ´çš„ç•Œé¢è®¾è®¡ï¼Œæ¸…æ™°å±•ç¤ºçº¿ç¨‹ä¸é”çš„å…³ç³»å›¾ï¼Œçªå‡ºæ˜¾ç¤ºæ­»é”å¾ªç¯ï¼Œå¸®åŠ©ç”¨æˆ·ç›´è§‚ç†è§£æ­»é”äº§ç”Ÿçš„åŸå› å’Œä½ç½®ã€‚

## æ–‡ä»¶ç»“æ„

```
.
â”œâ”€â”€ .run/                   # é¢„å®šä¹‰çš„è¿è¡Œ/è°ƒè¯•é…ç½®
â”œâ”€â”€ build/                  # æ„å»ºè¾“å‡ºç›®å½•
â”œâ”€â”€ gradle
â”‚   â”œâ”€â”€ wrapper/            # Gradle Wrapper
â”œâ”€â”€ src                     # æ’ä»¶æºä»£ç 
â”‚   â”œâ”€â”€ main
â”‚   â”‚   â”œâ”€â”€ java/           # Java ç”Ÿäº§æºä»£ç 
â”‚   â”‚   â”‚   â””â”€â”€ com/deadlock/detector/  # æ’ä»¶å®ç°
â”‚   â”‚   â”‚       â”œâ”€â”€ action/      # IDE æ“ä½œå®ç°
â”‚   â”‚   â”‚       â”œâ”€â”€ detector/    # æ­»é”æ£€æµ‹é€»è¾‘
â”‚   â”‚   â”‚       â””â”€â”€ model/       # æ•°æ®æ¨¡å‹
â”‚   â”‚   â””â”€â”€ resources/      # èµ„æºæ–‡ä»¶ - plugin.xml, å›¾æ ‡, æ¶ˆæ¯
â”‚   â”‚       â””â”€â”€ META-INF/
â”‚   â”‚           â””â”€â”€ plugin.xml  # æ’ä»¶é…ç½®æ–‡ä»¶
â”œâ”€â”€ .gitignore              # Git å¿½ç•¥è§„åˆ™
â”œâ”€â”€ build.gradle.kts        # Gradle æ„å»ºé…ç½®
â”œâ”€â”€ gradle.properties       # Gradle é…ç½®å±æ€§
â”œâ”€â”€ gradlew                 # *nix Gradle Wrapper è„šæœ¬
â”œâ”€â”€ gradlew.bat             # Windows Gradle Wrapper è„šæœ¬
â”œâ”€â”€ README.md               # é¡¹ç›®è¯´æ˜æ–‡æ¡£
â””â”€â”€ settings.gradle.kts     # Gradle é¡¹ç›®è®¾ç½®
```

## æ„å»ºã€å¯åŠ¨ä¸è°ƒè¯•

### æ„å»ºé¡¹ç›®

ä½¿ç”¨ Gradle æ„å»ºæ’ä»¶ï¼š

```bash
./gradlew build
```

### è¿è¡Œæ’ä»¶

å¯åŠ¨ IntelliJ IDEA å¹¶åŠ è½½æ’ä»¶ï¼š

```bash
./gradlew runIde
```

è¿™å°†å¯åŠ¨ä¸€ä¸ªæ–°çš„ IntelliJ IDEA å®ä¾‹ï¼Œè‡ªåŠ¨å®‰è£…å¹¶åŠ è½½å½“å‰å¼€å‘çš„æ’ä»¶ã€‚

### æ„å»ºæ’ä»¶åˆ†å‘åŒ…

ç”Ÿæˆå¯åˆ†å‘çš„æ’ä»¶åŒ…ï¼š

```bash
./gradlew buildPlugin
```

æ„å»ºå®Œæˆåï¼Œæ’ä»¶åŒ…å°†ç”Ÿæˆåœ¨ `build/distributions` ç›®å½•ä¸‹ã€‚

### è°ƒè¯•æ”¯æŒ

æ”¯æŒé€šè¿‡ IntelliJ IDEA çš„é¢„å®šä¹‰è¿è¡Œ/è°ƒè¯•é…ç½®è¿›è¡Œæ’ä»¶è°ƒè¯•ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ Gradle å‘½ä»¤è¡Œå·¥å…·å¯åŠ¨è°ƒè¯•ä¼šè¯ã€‚

### ä½¿ç”¨æ–¹æ³•

1. åœ¨ IntelliJ IDEA/DevEcoStudio ä¸­æ‰“å¼€è¯¥é¡¹ç›®
2. è¿è¡Œ `./gradlew runIde` å¯åŠ¨å¸¦æœ‰æ’ä»¶çš„ IDE å®ä¾‹
3. åœ¨æ–°çš„ IDE å®ä¾‹ä¸­ç¼–å†™æˆ–æ‰“å¼€ Java å¹¶å‘ä»£ç 
4. å³é”®ç‚¹å‡»ä»£ç ç¼–è¾‘å™¨ï¼Œé€‰æ‹©"Detect Deadlock"èœå•é¡¹
5. æ’ä»¶ä¼šè‡ªåŠ¨åˆ†æä»£ç å¹¶æ˜¾ç¤ºæ­»é”æ£€æµ‹ç»“æœ

## æµ‹è¯•ç”¨ä¾‹

é¡¹ç›®ä¸­åŒ…å«ç»å…¸çš„æ­»é”æ¼”ç¤ºä»£ç  `DeadlockDemo.java`ï¼Œå±•ç¤ºäº†ä¸¤ä¸ªçº¿ç¨‹äº’ç›¸ç­‰å¾…å¯¹æ–¹æŒæœ‰çš„é”è€Œäº§ç”Ÿæ­»é”çš„å…¸å‹åœºæ™¯ï¼š

```java
public class DeadlockDemo {
    private static final Object resource1 = new Object();
    private static final Object resource2 = new Object();

    public static void main(String[] args) {
        // çº¿ç¨‹1ï¼šå…ˆè·å–resource1ï¼Œå†å°è¯•è·å–resource2
        Thread thread1 = new Thread(() -> {
            synchronized (resource1) {
                System.out.println("çº¿ç¨‹1: å·²è·å–èµ„æº1");
                try { Thread.sleep(100); } catch (InterruptedException e) { e.printStackTrace(); }
                System.out.println("çº¿ç¨‹1: å°è¯•è·å–èµ„æº2...");
                synchronized (resource2) { System.out.println("çº¿ç¨‹1: å·²è·å–èµ„æº2"); }
            }
        });
        
        // çº¿ç¨‹2ï¼šå…ˆè·å–resource2ï¼Œå†å°è¯•è·å–resource1
        Thread thread2 = new Thread(() -> {
            synchronized (resource2) {
                System.out.println("çº¿ç¨‹2: å·²è·å–èµ„æº2");
                try { Thread.sleep(100); } catch (InterruptedException e) { e.printStackTrace(); }
                System.out.println("çº¿ç¨‹2: å°è¯•è·å–èµ„æº1...");
                synchronized (resource1) { System.out.println("çº¿ç¨‹2: å·²è·å–èµ„æº1"); }
            }
        });
        
        thread1.start();
        thread2.start();
    }
}
```

## æ’ä»¶é…ç½®

æ’ä»¶é…ç½®æ–‡ä»¶ä½äº `src/main/resources/META-INF/plugin.xml`ï¼ŒåŒ…å«æ’ä»¶çš„åŸºæœ¬ä¿¡æ¯ã€ä¾èµ–å…³ç³»ã€æ‰©å±•ç‚¹å’Œç›‘å¬å™¨é…ç½®ã€‚

## é¡¹ç›®å‚ä¸äººå‘˜

Uenaaa

## è®¸å¯è¯

MIT License

æ¬¢è¿å­¦ä¹ å’Œä½¿ç”¨æœ¬é¡¹ç›®ï¼Œç”¨äºæ•™å­¦ã€ç ”ç©¶å’Œå®éªŒå¹¶å‘ç¼–ç¨‹çš„æ­»é”æ£€æµ‹æŠ€æœ¯ ğŸš€
